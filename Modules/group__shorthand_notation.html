<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Shorthand Notation | QIR Adaptor Tool Developer Documentation</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/qat/assets/css/0.styles.9ffaf24c.css" as="style"><link rel="preload" href="/qat/assets/js/app.095a458a.js" as="script"><link rel="preload" href="/qat/assets/js/2.c16f4dee.js" as="script"><link rel="preload" href="/qat/assets/js/195.cd2dc82c.js" as="script"><link rel="prefetch" href="/qat/assets/js/10.ca67c9fc.js"><link rel="prefetch" href="/qat/assets/js/100.fa1e3de5.js"><link rel="prefetch" href="/qat/assets/js/101.a303e4a1.js"><link rel="prefetch" href="/qat/assets/js/102.d7505516.js"><link rel="prefetch" href="/qat/assets/js/103.94a7645e.js"><link rel="prefetch" href="/qat/assets/js/104.494a3276.js"><link rel="prefetch" href="/qat/assets/js/105.b08b3174.js"><link rel="prefetch" href="/qat/assets/js/106.e60966eb.js"><link rel="prefetch" href="/qat/assets/js/107.5860da95.js"><link rel="prefetch" href="/qat/assets/js/108.89416570.js"><link rel="prefetch" href="/qat/assets/js/109.916384ce.js"><link rel="prefetch" href="/qat/assets/js/11.17cef0d0.js"><link rel="prefetch" href="/qat/assets/js/110.749f477f.js"><link rel="prefetch" href="/qat/assets/js/111.92f4dc98.js"><link rel="prefetch" href="/qat/assets/js/112.7a496ea4.js"><link rel="prefetch" href="/qat/assets/js/113.12462969.js"><link rel="prefetch" href="/qat/assets/js/114.e07bef58.js"><link rel="prefetch" href="/qat/assets/js/115.0588ee56.js"><link rel="prefetch" href="/qat/assets/js/116.1cf0f7ac.js"><link rel="prefetch" href="/qat/assets/js/117.9ce8b6e0.js"><link rel="prefetch" href="/qat/assets/js/118.97eb40a5.js"><link rel="prefetch" href="/qat/assets/js/119.d8166ef5.js"><link rel="prefetch" href="/qat/assets/js/12.24429e42.js"><link rel="prefetch" href="/qat/assets/js/120.3e0f5345.js"><link rel="prefetch" href="/qat/assets/js/121.52fc955d.js"><link rel="prefetch" href="/qat/assets/js/122.9b11093b.js"><link rel="prefetch" href="/qat/assets/js/123.3d5484c6.js"><link rel="prefetch" href="/qat/assets/js/124.fd335bcc.js"><link rel="prefetch" href="/qat/assets/js/125.687d26ff.js"><link rel="prefetch" href="/qat/assets/js/126.0a02a10d.js"><link rel="prefetch" href="/qat/assets/js/127.f034a973.js"><link rel="prefetch" href="/qat/assets/js/128.039d9dd0.js"><link rel="prefetch" href="/qat/assets/js/129.e4321e17.js"><link rel="prefetch" href="/qat/assets/js/13.8f12c582.js"><link rel="prefetch" href="/qat/assets/js/130.5aec9f46.js"><link rel="prefetch" href="/qat/assets/js/131.d14a045c.js"><link rel="prefetch" href="/qat/assets/js/132.5c6eafcf.js"><link rel="prefetch" href="/qat/assets/js/133.0dbdfe29.js"><link rel="prefetch" href="/qat/assets/js/134.eaf99e9e.js"><link rel="prefetch" href="/qat/assets/js/135.25570d9a.js"><link rel="prefetch" href="/qat/assets/js/136.2466d3a9.js"><link rel="prefetch" href="/qat/assets/js/137.96f2f8cf.js"><link rel="prefetch" href="/qat/assets/js/138.23be8872.js"><link rel="prefetch" href="/qat/assets/js/139.865b4eaf.js"><link rel="prefetch" href="/qat/assets/js/14.9bfd8aa8.js"><link rel="prefetch" href="/qat/assets/js/140.70eb718a.js"><link rel="prefetch" href="/qat/assets/js/141.1f6c40d8.js"><link rel="prefetch" href="/qat/assets/js/142.118e196f.js"><link rel="prefetch" href="/qat/assets/js/143.0a60ac15.js"><link rel="prefetch" href="/qat/assets/js/144.da08cc0b.js"><link rel="prefetch" href="/qat/assets/js/145.85578c75.js"><link rel="prefetch" href="/qat/assets/js/146.2881e068.js"><link rel="prefetch" href="/qat/assets/js/147.4df56b19.js"><link rel="prefetch" href="/qat/assets/js/148.36afd77b.js"><link rel="prefetch" href="/qat/assets/js/149.52078f4c.js"><link rel="prefetch" href="/qat/assets/js/15.5a546cc1.js"><link rel="prefetch" href="/qat/assets/js/150.1bce48aa.js"><link rel="prefetch" href="/qat/assets/js/151.328fbf45.js"><link rel="prefetch" href="/qat/assets/js/152.f4a4de22.js"><link rel="prefetch" href="/qat/assets/js/153.6878d3c4.js"><link rel="prefetch" href="/qat/assets/js/154.7f1d05e5.js"><link rel="prefetch" href="/qat/assets/js/155.a0c4e908.js"><link rel="prefetch" href="/qat/assets/js/156.60f7f4a2.js"><link rel="prefetch" href="/qat/assets/js/157.29fb13cb.js"><link rel="prefetch" href="/qat/assets/js/158.a9da5736.js"><link rel="prefetch" href="/qat/assets/js/159.006fa2a3.js"><link rel="prefetch" href="/qat/assets/js/16.5cf533bc.js"><link rel="prefetch" href="/qat/assets/js/160.d67d343d.js"><link rel="prefetch" href="/qat/assets/js/161.5cb4bd9e.js"><link rel="prefetch" href="/qat/assets/js/162.165cd909.js"><link rel="prefetch" href="/qat/assets/js/163.21014511.js"><link rel="prefetch" href="/qat/assets/js/164.ae2e1f04.js"><link rel="prefetch" href="/qat/assets/js/165.71b7d1c3.js"><link rel="prefetch" href="/qat/assets/js/166.cfae4028.js"><link rel="prefetch" href="/qat/assets/js/167.5d1bdeeb.js"><link rel="prefetch" href="/qat/assets/js/168.aeade6b5.js"><link rel="prefetch" href="/qat/assets/js/169.0fc489bd.js"><link rel="prefetch" href="/qat/assets/js/17.899b8caf.js"><link rel="prefetch" href="/qat/assets/js/170.323fc4bb.js"><link rel="prefetch" href="/qat/assets/js/171.f752fd79.js"><link rel="prefetch" href="/qat/assets/js/172.d034ded1.js"><link rel="prefetch" href="/qat/assets/js/173.40da22cd.js"><link rel="prefetch" href="/qat/assets/js/174.a2b2ee43.js"><link rel="prefetch" href="/qat/assets/js/175.b980d373.js"><link rel="prefetch" href="/qat/assets/js/176.a966a0c0.js"><link rel="prefetch" href="/qat/assets/js/177.6aead1a3.js"><link rel="prefetch" href="/qat/assets/js/178.d586ad19.js"><link rel="prefetch" href="/qat/assets/js/179.2d38da52.js"><link rel="prefetch" href="/qat/assets/js/18.c7711af4.js"><link rel="prefetch" href="/qat/assets/js/180.ebdd713f.js"><link rel="prefetch" href="/qat/assets/js/181.9915bc0b.js"><link rel="prefetch" href="/qat/assets/js/182.b0409d66.js"><link rel="prefetch" href="/qat/assets/js/183.b0356262.js"><link rel="prefetch" href="/qat/assets/js/184.a7ce7d21.js"><link rel="prefetch" href="/qat/assets/js/185.f3c8f942.js"><link rel="prefetch" href="/qat/assets/js/186.54ab626c.js"><link rel="prefetch" href="/qat/assets/js/187.cc6c94e8.js"><link rel="prefetch" href="/qat/assets/js/188.cf2b5f45.js"><link rel="prefetch" href="/qat/assets/js/189.f7e141b8.js"><link rel="prefetch" href="/qat/assets/js/19.8487c2a1.js"><link rel="prefetch" href="/qat/assets/js/190.e3fef916.js"><link rel="prefetch" href="/qat/assets/js/191.728c2159.js"><link rel="prefetch" href="/qat/assets/js/192.5d54991d.js"><link rel="prefetch" href="/qat/assets/js/193.365650d4.js"><link rel="prefetch" href="/qat/assets/js/194.10925be4.js"><link rel="prefetch" href="/qat/assets/js/196.17eca47b.js"><link rel="prefetch" href="/qat/assets/js/197.8bae1545.js"><link rel="prefetch" href="/qat/assets/js/198.1b130f84.js"><link rel="prefetch" href="/qat/assets/js/199.6c49188f.js"><link rel="prefetch" href="/qat/assets/js/20.ce597c5e.js"><link rel="prefetch" href="/qat/assets/js/200.b2915555.js"><link rel="prefetch" href="/qat/assets/js/201.c1c21d9a.js"><link rel="prefetch" href="/qat/assets/js/202.1b9e47a7.js"><link rel="prefetch" href="/qat/assets/js/203.37c8de57.js"><link rel="prefetch" href="/qat/assets/js/204.1686331e.js"><link rel="prefetch" href="/qat/assets/js/205.9d5389d5.js"><link rel="prefetch" href="/qat/assets/js/206.3b70f0c2.js"><link rel="prefetch" href="/qat/assets/js/207.ad61ee16.js"><link rel="prefetch" href="/qat/assets/js/208.cecd5551.js"><link rel="prefetch" href="/qat/assets/js/209.79b24ee6.js"><link rel="prefetch" href="/qat/assets/js/21.c2cfdae3.js"><link rel="prefetch" href="/qat/assets/js/22.edf81d2f.js"><link rel="prefetch" href="/qat/assets/js/23.81a4380d.js"><link rel="prefetch" href="/qat/assets/js/24.1dd0cec6.js"><link rel="prefetch" href="/qat/assets/js/25.2e0d2297.js"><link rel="prefetch" href="/qat/assets/js/26.63f3e4ae.js"><link rel="prefetch" href="/qat/assets/js/27.c274073b.js"><link rel="prefetch" href="/qat/assets/js/28.ca0a245e.js"><link rel="prefetch" href="/qat/assets/js/29.87c59657.js"><link rel="prefetch" href="/qat/assets/js/3.03284f30.js"><link rel="prefetch" href="/qat/assets/js/30.db000092.js"><link rel="prefetch" href="/qat/assets/js/31.190df5b6.js"><link rel="prefetch" href="/qat/assets/js/32.901b2885.js"><link rel="prefetch" href="/qat/assets/js/33.8c010e64.js"><link rel="prefetch" href="/qat/assets/js/34.c0602864.js"><link rel="prefetch" href="/qat/assets/js/35.be5a8e74.js"><link rel="prefetch" href="/qat/assets/js/36.1d524ebe.js"><link rel="prefetch" href="/qat/assets/js/37.33950672.js"><link rel="prefetch" href="/qat/assets/js/38.ca665f48.js"><link rel="prefetch" href="/qat/assets/js/39.286b129a.js"><link rel="prefetch" href="/qat/assets/js/4.83fce895.js"><link rel="prefetch" href="/qat/assets/js/40.0892c721.js"><link rel="prefetch" href="/qat/assets/js/41.3ec2fd04.js"><link rel="prefetch" href="/qat/assets/js/42.0957aff3.js"><link rel="prefetch" href="/qat/assets/js/43.a7618f9f.js"><link rel="prefetch" href="/qat/assets/js/44.0422424c.js"><link rel="prefetch" href="/qat/assets/js/45.e8ad4c53.js"><link rel="prefetch" href="/qat/assets/js/46.b17c8d8d.js"><link rel="prefetch" href="/qat/assets/js/47.dd5daf10.js"><link rel="prefetch" href="/qat/assets/js/48.695a8003.js"><link rel="prefetch" href="/qat/assets/js/49.d85e6101.js"><link rel="prefetch" href="/qat/assets/js/5.33a173f2.js"><link rel="prefetch" href="/qat/assets/js/50.9d4e204c.js"><link rel="prefetch" href="/qat/assets/js/51.6c15c4a6.js"><link rel="prefetch" href="/qat/assets/js/52.2fc812f3.js"><link rel="prefetch" href="/qat/assets/js/53.eee2140d.js"><link rel="prefetch" href="/qat/assets/js/54.f8028da4.js"><link rel="prefetch" href="/qat/assets/js/55.c947887d.js"><link rel="prefetch" href="/qat/assets/js/56.b45006d7.js"><link rel="prefetch" href="/qat/assets/js/57.7b686ea1.js"><link rel="prefetch" href="/qat/assets/js/58.82f0ffee.js"><link rel="prefetch" href="/qat/assets/js/59.4adba173.js"><link rel="prefetch" href="/qat/assets/js/6.7a505dc8.js"><link rel="prefetch" href="/qat/assets/js/60.dc093b25.js"><link rel="prefetch" href="/qat/assets/js/61.32f169d5.js"><link rel="prefetch" href="/qat/assets/js/62.56d7d941.js"><link rel="prefetch" href="/qat/assets/js/63.f4073a80.js"><link rel="prefetch" href="/qat/assets/js/64.988e3c0b.js"><link rel="prefetch" href="/qat/assets/js/65.b4a5075d.js"><link rel="prefetch" href="/qat/assets/js/66.7f3f0e65.js"><link rel="prefetch" href="/qat/assets/js/67.faacfdb5.js"><link rel="prefetch" href="/qat/assets/js/68.f689f608.js"><link rel="prefetch" href="/qat/assets/js/69.c646d14b.js"><link rel="prefetch" href="/qat/assets/js/7.14b60190.js"><link rel="prefetch" href="/qat/assets/js/70.6b6f39f1.js"><link rel="prefetch" href="/qat/assets/js/71.281d47e1.js"><link rel="prefetch" href="/qat/assets/js/72.3e076da8.js"><link rel="prefetch" href="/qat/assets/js/73.1e46b698.js"><link rel="prefetch" href="/qat/assets/js/74.d20dd1f7.js"><link rel="prefetch" href="/qat/assets/js/75.558c161c.js"><link rel="prefetch" href="/qat/assets/js/76.5fca2088.js"><link rel="prefetch" href="/qat/assets/js/77.06456bde.js"><link rel="prefetch" href="/qat/assets/js/78.a3cfd616.js"><link rel="prefetch" href="/qat/assets/js/79.98b708e7.js"><link rel="prefetch" href="/qat/assets/js/8.16f6f26a.js"><link rel="prefetch" href="/qat/assets/js/80.41aa79b1.js"><link rel="prefetch" href="/qat/assets/js/81.5dd0b5ba.js"><link rel="prefetch" href="/qat/assets/js/82.5d453ca9.js"><link rel="prefetch" href="/qat/assets/js/83.6e5bf8d0.js"><link rel="prefetch" href="/qat/assets/js/84.a5fe4edf.js"><link rel="prefetch" href="/qat/assets/js/85.ead7afd3.js"><link rel="prefetch" href="/qat/assets/js/86.0894f8c4.js"><link rel="prefetch" href="/qat/assets/js/87.0b127aa0.js"><link rel="prefetch" href="/qat/assets/js/88.c518bdff.js"><link rel="prefetch" href="/qat/assets/js/89.a999ea82.js"><link rel="prefetch" href="/qat/assets/js/9.35501b87.js"><link rel="prefetch" href="/qat/assets/js/90.3157253b.js"><link rel="prefetch" href="/qat/assets/js/91.0ef2ceba.js"><link rel="prefetch" href="/qat/assets/js/92.fdf0074d.js"><link rel="prefetch" href="/qat/assets/js/93.9b08604a.js"><link rel="prefetch" href="/qat/assets/js/94.0d663c39.js"><link rel="prefetch" href="/qat/assets/js/95.438766ea.js"><link rel="prefetch" href="/qat/assets/js/96.dde37349.js"><link rel="prefetch" href="/qat/assets/js/97.1ca24c5b.js"><link rel="prefetch" href="/qat/assets/js/98.29827c66.js"><link rel="prefetch" href="/qat/assets/js/99.f859f6ff.js">
    <link rel="stylesheet" href="/qat/assets/css/0.styles.9ffaf24c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/qat/" class="home-link router-link-active"><!----> <span class="site-name">QIR Adaptor Tool Developer Documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/qat/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/qat/Classes/" class="nav-link">
  Classes
</a></div><div class="nav-item"><a href="/qat/Namespaces/" class="nav-link">
  Namespaces
</a></div><div class="nav-item"><a href="/qat/Modules/" class="nav-link router-link-active">
  Modules
</a></div><div class="nav-item"><a href="/qat/Files/" class="nav-link">
  Files
</a></div><div class="nav-item"><a href="/qat/Pages/" class="nav-link">
  Pages
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/qat/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/qat/Classes/" class="nav-link">
  Classes
</a></div><div class="nav-item"><a href="/qat/Namespaces/" class="nav-link">
  Namespaces
</a></div><div class="nav-item"><a href="/qat/Modules/" class="nav-link router-link-active">
  Modules
</a></div><div class="nav-item"><a href="/qat/Files/" class="nav-link">
  Files
</a></div><div class="nav-item"><a href="/qat/Pages/" class="nav-link">
  Pages
</a></div> <!----></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="shorthand-notation"><a href="#shorthand-notation" class="header-anchor">#</a> Shorthand Notation</h1> <p><a href="#detailed-description">More...</a></p> <h2 id="functions"><a href="#functions" class="header-anchor">#</a> Functions</h2> <table><thead><tr><th></th> <th>Name</th></tr></thead> <tbody><tr><td></td> <td><strong><a href="/qat/Modules/group__shorthand_notation.html#function-capture">Capture</a></strong>(std::string const &amp; name)<br>Explicit creation using string name constructor.</td></tr> <tr><td>IOperandPrototypePtr</td> <td><strong><a href="/qat/Modules/group__shorthand_notation.html#function-operator=">operator=</a></strong>(IOperandPrototypePtr const &amp; other)</td></tr> <tr><td>template &lt;typename... Args&gt; <br>IOperandPrototypePtr</td> <td><strong><a href="/qat/Modules/group__shorthand_notation.html#function-call">call</a></strong>(std::string const &amp; name, Args... args)</td></tr> <tr><td>IOperandPrototypePtr</td> <td><strong><a href="/qat/Modules/group__shorthand_notation.html#function-unnamedinvoke">unnamedInvoke</a></strong>()<br>Matches a invoke instruction.</td></tr> <tr><td>template &lt;typename... Args&gt; <br>IOperandPrototypePtr</td> <td><strong><a href="/qat/Modules/group__shorthand_notation.html#function-phi">phi</a></strong>(Args... args)<br>Matches a phi node with N arguments.</td></tr> <tr><td>IOperandPrototypePtr</td> <td><strong><a href="/qat/Modules/group__shorthand_notation.html#function-callbynameonly">callByNameOnly</a></strong>(std::string const &amp; name)</td></tr> <tr><td>IOperandPrototypePtr</td> <td><strong><a href="/qat/Modules/group__shorthand_notation.html#function-bitcast">bitCast</a></strong>(IOperandPrototypePtr const &amp; arg)<br>Matches the llvm::BitCast instructruction.</td></tr> <tr><td>IOperandPrototypePtr</td> <td><strong><a href="/qat/Modules/group__shorthand_notation.html#function-inttoptr">intToPtr</a></strong>(IOperandPrototypePtr const &amp; arg)<br>Matches the llvm::IntToPtr instructruction.</td></tr> <tr><td>IOperandPrototypePtr</td> <td><strong><a href="/qat/Modules/group__shorthand_notation.html#function-constint">constInt</a></strong>()<br>Matches the llvm::ConstantInt instructruction.</td></tr> <tr><td>IOperandPrototypePtr</td> <td><strong><a href="/qat/Modules/group__shorthand_notation.html#function-branch">branch</a></strong>(IOperandPrototypePtr const &amp; cond, IOperandPrototypePtr const &amp; arg1, IOperandPrototypePtr const &amp; arg2)<br>Matches a branch instruction given a condition and two arguments.</td></tr> <tr><td>IOperandPrototypePtr</td> <td><strong><a href="/qat/Modules/group__shorthand_notation.html#function-switchop">switchOp</a></strong>(IOperandPrototypePtr const &amp; cond, IOperandPrototypePtr const &amp; arg1, IOperandPrototypePtr const &amp; arg2)</td></tr> <tr><td>IOperandPrototypePtr</td> <td><strong><a href="/qat/Modules/group__shorthand_notation.html#function-select">select</a></strong>(IOperandPrototypePtr const &amp; cond, IOperandPrototypePtr const &amp; arg1, IOperandPrototypePtr const &amp; arg2)<br>Matches a select instruction given a condition and two arguments.</td></tr> <tr><td>IOperandPrototypePtr</td> <td><strong><a href="/qat/Modules/group__shorthand_notation.html#function-load">load</a></strong>(IOperandPrototypePtr const &amp; arg)<br>Matches a load instruction with one argument.</td></tr> <tr><td>IOperandPrototypePtr</td> <td><strong><a href="/qat/Modules/group__shorthand_notation.html#function-store">store</a></strong>(IOperandPrototypePtr const &amp; target, IOperandPrototypePtr const &amp; value)</td></tr> <tr><td>IOperandPrototypePtr</td> <td><strong><a href="/qat/Modules/group__shorthand_notation.html#function-basicblock">basicBlock</a></strong>()<br>Matches a load instruction with one argument.</td></tr> <tr><td>ReplacerFunction</td> <td><strong><a href="/qat/Modules/group__shorthand_notation.html#function-deleteinstruction">deleteInstruction</a></strong>()</td></tr> <tr><td>Capture</td> <td><strong><a href="/qat/Modules/group__shorthand_notation.html#function-operator&quot;&quot;_cap">operator&quot;&quot;_cap</a></strong>(char const * name, std::size_t )</td></tr></tbody></table> <h2 id="attributes"><a href="#attributes" class="header-anchor">#</a> Attributes</h2> <table><thead><tr><th></th> <th>Name</th></tr></thead> <tbody><tr><td>const std::shared_ptr&lt; AnyPattern &gt;</td> <td><strong><a href="/qat/Modules/group__shorthand_notation.html#variable-_">_</a></strong></td></tr></tbody></table> <h2 id="detailed-description"><a href="#detailed-description" class="header-anchor">#</a> Detailed Description</h2> <p>Shorthand notations are made to make it possible to match patterns in the QIR. This part of the library focuses on making it easy to express advance patterns in just a few lines and specify what parts of the IR is of interest to the replacer function. An example is following pattern</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">auto</span> get_one <span class="token operator">=</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token string">&quot;__quantum__rt__result_get_one&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">addRule</span><span class="token punctuation">(</span>
    <span class="token punctuation">{</span><span class="token function">branch</span><span class="token punctuation">(</span><span class="token string">&quot;cond&quot;</span>_cap <span class="token operator">=</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token string">&quot;__quantum__rt__result_equal&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;result&quot;</span>_cap <span class="token operator">=</span> _<span class="token punctuation">,</span> <span class="token string">&quot;one&quot;</span>_cap <span class="token operator">=</span>
    get_one<span class="token punctuation">)</span><span class="token punctuation">,</span> _<span class="token punctuation">,</span> _<span class="token punctuation">)</span><span class="token punctuation">,</span>
     replace_branch_positive<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>which matches IRs of the form</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token operator">%</span><span class="token number">1</span> <span class="token operator">=</span> call <span class="token operator">%</span>Result<span class="token operator">*</span> @<span class="token function">__quantum__rt__result_get_one</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">%</span><span class="token number">2</span> <span class="token operator">=</span> call i1 @<span class="token function">__quantum__rt__result_equal</span><span class="token punctuation">(</span><span class="token operator">%</span>Result<span class="token operator">*</span> <span class="token operator">%</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">%</span>Result<span class="token operator">*</span> <span class="token operator">%</span><span class="token number">1</span><span class="token punctuation">)</span>
br i1 <span class="token operator">%</span><span class="token number">2</span><span class="token punctuation">,</span> label <span class="token operator">%</span>then0__1<span class="token punctuation">,</span> label <span class="token operator">%</span>continue__1
</code></pre></div><p>The pattern futher specifies that as a successful match is obtained, a table capturing certain values must be created. In the above example, the table would contain three entries: <code>cond</code>, <code>result</code> and <code>one</code> each of which would point to a a llvm::Value* in the QIR. This allows the replacement function to easily manipulate the DAG in these three places (four if you include the main captured value which is always passed to the replacement function).</p> <p>The module further has shorthand notation for often encountered patterns such as any operand.</p> <p>The module also implements shorthand notation for common replacers.</p> <p>Literals which ease the burned of capturing values and increase readibility of the code.</p> <h2 id="functions-documentation"><a href="#functions-documentation" class="header-anchor">#</a> Functions Documentation</h2> <h3 id="function-capture"><a href="#function-capture" class="header-anchor">#</a> function Capture</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">explicit</span> <span class="token function">Capture</span><span class="token punctuation">(</span>
    std<span class="token double-colon punctuation">::</span>string <span class="token keyword">const</span> <span class="token operator">&amp;</span> name
<span class="token punctuation">)</span>
</code></pre></div><p>Explicit creation using string name constructor.</p> <h3 id="function-operator"><a href="#function-operator" class="header-anchor">#</a> function operator=</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code>IOperandPrototypePtr <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span>
    IOperandPrototypePtr <span class="token keyword">const</span> <span class="token operator">&amp;</span> other
<span class="token punctuation">)</span>
</code></pre></div><h3 id="function-call"><a href="#function-call" class="header-anchor">#</a> function call</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> Args<span class="token operator">&gt;</span>
IOperandPrototypePtr <span class="token function">call</span><span class="token punctuation">(</span>
    std<span class="token double-colon punctuation">::</span>string <span class="token keyword">const</span> <span class="token operator">&amp;</span> name<span class="token punctuation">,</span>
    Args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args
<span class="token punctuation">)</span>
</code></pre></div><p>Shorthand notations are made to make it possible to match patterns in the QIR. This part of the library focuses on making it easy to express advance patterns in just a few lines and specify what parts of the IR is of interest to the replacer function. An example is following pattern</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">auto</span> get_one <span class="token operator">=</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token string">&quot;__quantum__rt__result_get_one&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">addRule</span><span class="token punctuation">(</span>
    <span class="token punctuation">{</span><span class="token function">branch</span><span class="token punctuation">(</span><span class="token string">&quot;cond&quot;</span>_cap <span class="token operator">=</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token string">&quot;__quantum__rt__result_equal&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;result&quot;</span>_cap <span class="token operator">=</span> _<span class="token punctuation">,</span> <span class="token string">&quot;one&quot;</span>_cap <span class="token operator">=</span>
    get_one<span class="token punctuation">)</span><span class="token punctuation">,</span> _<span class="token punctuation">,</span> _<span class="token punctuation">)</span><span class="token punctuation">,</span>
     replace_branch_positive<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>which matches IRs of the form</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token operator">%</span><span class="token number">1</span> <span class="token operator">=</span> call <span class="token operator">%</span>Result<span class="token operator">*</span> @<span class="token function">__quantum__rt__result_get_one</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">%</span><span class="token number">2</span> <span class="token operator">=</span> call i1 @<span class="token function">__quantum__rt__result_equal</span><span class="token punctuation">(</span><span class="token operator">%</span>Result<span class="token operator">*</span> <span class="token operator">%</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">%</span>Result<span class="token operator">*</span> <span class="token operator">%</span><span class="token number">1</span><span class="token punctuation">)</span>
br i1 <span class="token operator">%</span><span class="token number">2</span><span class="token punctuation">,</span> label <span class="token operator">%</span>then0__1<span class="token punctuation">,</span> label <span class="token operator">%</span>continue__1
</code></pre></div><p>The pattern futher specifies that as a successful match is obtained, a table capturing certain values must be created. In the above example, the table would contain three entries: <code>cond</code>, <code>result</code> and <code>one</code> each of which would point to a a llvm::Value* in the QIR. This allows the replacement function to easily manipulate the DAG in these three places (four if you include the main captured value which is always passed to the replacement function). Shorthand notation to match an instruction for a function call. The resulting <a href="/qat/Classes/classmicrosoft_1_1quantum_1_1_i_operand_prototype.html">IOperandPrototype</a> matches a function call with arguments as specified by the arguments given. For instance,</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token function">addRule</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">,</span> _<span class="token punctuation">,</span> _<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">deleteInstruction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>matches a call to the function <code>foo</code> with exactly two arguments.</p> <p>Shorthand notation to match an instruction for a function call. The resulting <a href="/qat/Classes/classmicrosoft_1_1quantum_1_1_i_operand_prototype.html">IOperandPrototype</a> matches a function call with arguments as specified by the arguments given. For instance,</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token function">addRule</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">,</span> _<span class="token punctuation">,</span> _<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">deleteInstruction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>matches a call to the function <code>foo</code> with exactly two arguments.</p> <h3 id="function-unnamedinvoke"><a href="#function-unnamedinvoke" class="header-anchor">#</a> function unnamedInvoke</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code>IOperandPrototypePtr <span class="token function">unnamedInvoke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>Matches a invoke instruction.</p> <h3 id="function-phi"><a href="#function-phi" class="header-anchor">#</a> function phi</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> Args<span class="token operator">&gt;</span>
IOperandPrototypePtr <span class="token function">phi</span><span class="token punctuation">(</span>
    Args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args
<span class="token punctuation">)</span>
</code></pre></div><p>Matches a phi node with N arguments.</p> <h3 id="function-callbynameonly"><a href="#function-callbynameonly" class="header-anchor">#</a> function callByNameOnly</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code>IOperandPrototypePtr <span class="token function">callByNameOnly</span><span class="token punctuation">(</span>
    std<span class="token double-colon punctuation">::</span>string <span class="token keyword">const</span> <span class="token operator">&amp;</span> name
<span class="token punctuation">)</span>
</code></pre></div><p>Shorthand notation to match an instruction with a specified name. Unlike call, this pattern matches by name only and ignore the arguments.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token function">addRule</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token function">callByNameOnly</span><span class="token punctuation">(</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">deleteInstruction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>matches calls to the function <code>foo</code> regardless of the number of arguments.</p> <h3 id="function-bitcast"><a href="#function-bitcast" class="header-anchor">#</a> function bitCast</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code>IOperandPrototypePtr <span class="token function">bitCast</span><span class="token punctuation">(</span>
    IOperandPrototypePtr <span class="token keyword">const</span> <span class="token operator">&amp;</span> arg
<span class="token punctuation">)</span>
</code></pre></div><p>Matches the llvm::BitCast instructruction.</p> <h3 id="function-inttoptr"><a href="#function-inttoptr" class="header-anchor">#</a> function intToPtr</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code>IOperandPrototypePtr <span class="token function">intToPtr</span><span class="token punctuation">(</span>
    IOperandPrototypePtr <span class="token keyword">const</span> <span class="token operator">&amp;</span> arg
<span class="token punctuation">)</span>
</code></pre></div><p>Matches the llvm::IntToPtr instructruction.</p> <h3 id="function-constint"><a href="#function-constint" class="header-anchor">#</a> function constInt</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code>IOperandPrototypePtr <span class="token function">constInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>Matches the llvm::ConstantInt instructruction.</p> <h3 id="function-branch"><a href="#function-branch" class="header-anchor">#</a> function branch</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code>IOperandPrototypePtr <span class="token function">branch</span><span class="token punctuation">(</span>
    IOperandPrototypePtr <span class="token keyword">const</span> <span class="token operator">&amp;</span> cond<span class="token punctuation">,</span>
    IOperandPrototypePtr <span class="token keyword">const</span> <span class="token operator">&amp;</span> arg1<span class="token punctuation">,</span>
    IOperandPrototypePtr <span class="token keyword">const</span> <span class="token operator">&amp;</span> arg2
<span class="token punctuation">)</span>
</code></pre></div><p>Matches a branch instruction given a condition and two arguments.</p> <h3 id="function-switchop"><a href="#function-switchop" class="header-anchor">#</a> function switchOp</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code>IOperandPrototypePtr <span class="token function">switchOp</span><span class="token punctuation">(</span>
    IOperandPrototypePtr <span class="token keyword">const</span> <span class="token operator">&amp;</span> cond<span class="token punctuation">,</span>
    IOperandPrototypePtr <span class="token keyword">const</span> <span class="token operator">&amp;</span> arg1<span class="token punctuation">,</span>
    IOperandPrototypePtr <span class="token keyword">const</span> <span class="token operator">&amp;</span> arg2
<span class="token punctuation">)</span>
</code></pre></div><h3 id="function-select"><a href="#function-select" class="header-anchor">#</a> function select</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code>IOperandPrototypePtr <span class="token function">select</span><span class="token punctuation">(</span>
    IOperandPrototypePtr <span class="token keyword">const</span> <span class="token operator">&amp;</span> cond<span class="token punctuation">,</span>
    IOperandPrototypePtr <span class="token keyword">const</span> <span class="token operator">&amp;</span> arg1<span class="token punctuation">,</span>
    IOperandPrototypePtr <span class="token keyword">const</span> <span class="token operator">&amp;</span> arg2
<span class="token punctuation">)</span>
</code></pre></div><p>Matches a select instruction given a condition and two arguments.</p> <h3 id="function-load"><a href="#function-load" class="header-anchor">#</a> function load</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code>IOperandPrototypePtr <span class="token function">load</span><span class="token punctuation">(</span>
    IOperandPrototypePtr <span class="token keyword">const</span> <span class="token operator">&amp;</span> arg
<span class="token punctuation">)</span>
</code></pre></div><p>Matches a load instruction with one argument.</p> <h3 id="function-store"><a href="#function-store" class="header-anchor">#</a> function store</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code>IOperandPrototypePtr <span class="token function">store</span><span class="token punctuation">(</span>
    IOperandPrototypePtr <span class="token keyword">const</span> <span class="token operator">&amp;</span> target<span class="token punctuation">,</span>
    IOperandPrototypePtr <span class="token keyword">const</span> <span class="token operator">&amp;</span> value
<span class="token punctuation">)</span>
</code></pre></div><p>Matches a store instruction with a target and a value.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token function">addRule</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token function">store</span><span class="token punctuation">(</span><span class="token string">&quot;target&quot;</span>_cap <span class="token operator">=</span> _<span class="token punctuation">,</span> <span class="token string">&quot;value&quot;</span>_cap <span class="token operator">=</span> _<span class="token punctuation">)</span><span class="token punctuation">,</span> replaceConstExpr<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>where we want to match all store instructions and do not really care about how the target or value came about. In this case, we may want to capture the values to, for instance, make assignment at compile time.</p> <h3 id="function-basicblock"><a href="#function-basicblock" class="header-anchor">#</a> function basicBlock</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code>IOperandPrototypePtr <span class="token function">basicBlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>Matches a load instruction with one argument.</p> <h3 id="function-deleteinstruction"><a href="#function-deleteinstruction" class="header-anchor">#</a> function deleteInstruction</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code>ReplacerFunction <span class="token function">deleteInstruction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>Shorthand notation to delete an instruction. If passed as the replacement function, this function generates a replacer that deletes the instruction. This is a shorthand notation for deleting an instruction that can be used with a custom rule when building a ruleset. This function can be used with shorthand notation for patterns as follows:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token function">addRule</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token function">callByNameOnly</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">deleteInstruction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>to delete the instructions that calls functions with the name <code>name</code>.</p> <h3 id="function-operator-cap"><a href="#function-operator-cap" class="header-anchor">#</a> function operator&quot;&quot;_cap</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code>Capture <span class="token keyword">operator</span><span class="token string">&quot;&quot;</span><span class="token function">_cap</span><span class="token punctuation">(</span>
    <span class="token keyword">char</span> <span class="token keyword">const</span> <span class="token operator">*</span> name<span class="token punctuation">,</span>
    std<span class="token double-colon punctuation">::</span>size_t 
<span class="token punctuation">)</span>
</code></pre></div><p>Literal for specifying the capture of a llvm::Value*. This literal calls the IOperandPrototype::enableCapture through the assignment of a IOperandPrototypePtr to the class <a href="/qat/Classes/classmicrosoft_1_1quantum_1_1notation_1_1_capture.html">Capture</a>.</p> <p>As an example, one may want to match the pattern <code>foo(bar(baz(x)), y)</code> and extract the variable <code>x</code> to add meta data to it. The corresponding IR could look like:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token operator">%</span><span class="token number">1</span> <span class="token operator">=</span> call <span class="token operator">%</span>Type<span class="token operator">*</span> @<span class="token function">baz</span><span class="token punctuation">(</span><span class="token operator">%</span>Type<span class="token operator">*</span> <span class="token operator">%</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token operator">%</span><span class="token number">2</span> <span class="token operator">=</span> call <span class="token operator">%</span>Type<span class="token operator">*</span> @<span class="token function">bar</span><span class="token punctuation">(</span><span class="token operator">%</span>Type<span class="token operator">*</span> <span class="token operator">%</span><span class="token number">1</span><span class="token punctuation">)</span>
call <span class="token keyword">void</span> @<span class="token function">foo</span><span class="token punctuation">(</span><span class="token operator">%</span>Type<span class="token operator">*</span> <span class="token operator">%</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">%</span>Type<span class="token operator">*</span> <span class="token operator">%</span><span class="token number">3</span><span class="token punctuation">)</span>
</code></pre></div><p>To match this pattern, one would create the pattern <code>call(&quot;foo&quot;, call(&quot;bar&quot;, call(&quot;baz&quot;, &quot;x&quot;_cap = _)), _)</code>. This pattern would ensure that at the time where the replacer function is called, the value stored in <code>%0</code> is captured under the name <code>x</code>.</p> <h2 id="attributes-documentation"><a href="#attributes-documentation" class="header-anchor">#</a> Attributes Documentation</h2> <h3 id="variable"><a href="#variable" class="header-anchor">#</a> variable _</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">static</span> <span class="token keyword">const</span> std<span class="token double-colon punctuation">::</span>shared_ptr<span class="token operator">&lt;</span> AnyPattern <span class="token operator">&gt;</span> _ <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">make_shared</span><span class="token generic class-name"><span class="token operator">&lt;</span>AnyPattern<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Shorthand notation for a wildcard which matches anything. This value is useful when for instance capturing the arguments of a function call where the origin of the value does not matter to the pattern.</p> <hr> <p>Updated on 18 November 2021 at 09:48:05 UTC</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/qat/assets/js/app.095a458a.js" defer></script><script src="/qat/assets/js/2.c16f4dee.js" defer></script><script src="/qat/assets/js/195.cd2dc82c.js" defer></script>
  </body>
</html>
