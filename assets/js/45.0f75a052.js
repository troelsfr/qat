(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{429:function(t,s,a){"use strict";a.r(s);var n=a(54),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"microsoft-quantum-transformationrulespass"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#microsoft-quantum-transformationrulespass"}},[t._v("#")]),t._v(" microsoft::quantum::TransformationRulesPass")]),t._v(" "),a("p",[a("a",{attrs:{href:"#detailed-description"}},[t._v("More...")])]),t._v(" "),a("p",[a("code",[t._v("#include <TransformationRulesPass/TransformationRulesPass.hpp>")])]),t._v(" "),a("p",[t._v("Inherits from llvm::PassInfoMixin< TransformationRulesPass >")]),t._v(" "),a("h2",{attrs:{id:"public-types"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#public-types"}},[t._v("#")]),t._v(" Public Types")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th"),t._v(" "),a("th",[t._v("Name")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("using "),a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_replacement_rule.html#using-replacements"}},[t._v("ReplacementRule::Replacements")])],1),t._v(" "),a("td",[a("strong",[a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_transformation_rules_pass.html#using-replacements"}},[t._v("Replacements")])],1)])]),t._v(" "),a("tr",[a("td",[t._v("using llvm::Instruction")]),t._v(" "),a("td",[a("strong",[a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_transformation_rules_pass.html#using-instruction"}},[t._v("Instruction")])],1)])]),t._v(" "),a("tr",[a("td",[t._v("using std::vector< "),a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_replacement_rule.html"}},[t._v("ReplacementRule")]),t._v(" >")],1),t._v(" "),a("td",[a("strong",[a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_transformation_rules_pass.html#using-rules"}},[t._v("Rules")])],1)])]),t._v(" "),a("tr",[a("td",[t._v("using llvm::Value")]),t._v(" "),a("td",[a("strong",[a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_transformation_rules_pass.html#using-value"}},[t._v("Value")])],1)])]),t._v(" "),a("tr",[a("td",[t._v("using "),a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_replacement_rule.html#using-builder"}},[t._v("ReplacementRule::Builder")])],1),t._v(" "),a("td",[a("strong",[a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_transformation_rules_pass.html#using-builder"}},[t._v("Builder")])],1)])]),t._v(" "),a("tr",[a("td",[t._v("using "),a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_i_allocation_manager.html#using-allocationmanagerptr"}},[t._v("IAllocationManager::AllocationManagerPtr")])],1),t._v(" "),a("td",[a("strong",[a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_transformation_rules_pass.html#using-allocationmanagerptr"}},[t._v("AllocationManagerPtr")])],1)])]),t._v(" "),a("tr",[a("td",[t._v("using RuleSet::Captures")]),t._v(" "),a("td",[a("strong",[a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_transformation_rules_pass.html#using-captures"}},[t._v("Captures")])],1)])]),t._v(" "),a("tr",[a("td",[t._v("using std::unordered_map< std::string, llvm::ConstantInt * >")]),t._v(" "),a("td",[a("strong",[a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_transformation_rules_pass.html#using-constantarguments"}},[t._v("ConstantArguments")])],1)])]),t._v(" "),a("tr",[a("td",[t._v("using std::shared_ptr< "),a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_i_logger.html"}},[t._v("ILogger")]),t._v(" >")],1),t._v(" "),a("td",[a("strong",[a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_transformation_rules_pass.html#using-iloggerptr"}},[t._v("ILoggerPtr")])],1)])]),t._v(" "),a("tr",[a("td",[t._v("using std::vector< llvm::Instruction * >")]),t._v(" "),a("td",[a("strong",[a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_transformation_rules_pass.html#using-deletableinstructions"}},[t._v("DeletableInstructions")])],1)])]),t._v(" "),a("tr",[a("td",[t._v("using std::function< llvm::Value *(llvm::Value *, DeletableInstructions &)>")]),t._v(" "),a("td",[a("strong",[a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_transformation_rules_pass.html#using-instructionmodifier"}},[t._v("InstructionModifier")])],1)])])])]),t._v(" "),a("h2",{attrs:{id:"public-functions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#public-functions"}},[t._v("#")]),t._v(" Public Functions")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th"),t._v(" "),a("th",[t._v("Name")])])]),t._v(" "),a("tbody",[a("tr",[a("td"),t._v(" "),a("td",[a("strong",[a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_transformation_rules_pass.html#function-transformationrulespass"}},[t._v("TransformationRulesPass")])],1),t._v("("),a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_rule_set.html"}},[t._v("RuleSet")]),t._v(" && rule_set, "),a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_transformation_rules_pass_configuration.html"}},[t._v("TransformationRulesPassConfiguration")]),t._v(" const & config, "),a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_profile.html"}},[t._v("Profile")]),t._v(" * profile)"),a("br"),t._v("Custom default constructor.")],1)]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td",[a("strong",[a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_transformation_rules_pass.html#function-transformationrulespass"}},[t._v("TransformationRulesPass")])],1),t._v("("),a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_transformation_rules_pass.html"}},[t._v("TransformationRulesPass")]),t._v(" const & )"),a("br"),t._v("Copy construction is banned.")],1)]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td",[a("strong",[a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_transformation_rules_pass.html#function-transformationrulespass"}},[t._v("TransformationRulesPass")])],1),t._v("("),a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_transformation_rules_pass.html"}},[t._v("TransformationRulesPass")]),t._v(" && ) =default"),a("br"),t._v("We allow move semantics.")],1)]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td",[a("strong",[a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_transformation_rules_pass.html#function-~transformationrulespass"}},[t._v("~TransformationRulesPass")])],1),t._v("() =default"),a("br"),t._v("Default destruction.")])]),t._v(" "),a("tr",[a("td",[a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_transformation_rules_pass.html"}},[t._v("TransformationRulesPass")]),t._v(" &")],1),t._v(" "),a("td",[a("strong",[a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_transformation_rules_pass.html#function-operator="}},[t._v("operator=")])],1),t._v("("),a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_transformation_rules_pass.html"}},[t._v("TransformationRulesPass")]),t._v(" const & )"),a("br"),t._v("Copy assignment is banned.")],1)]),t._v(" "),a("tr",[a("td",[a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_transformation_rules_pass.html"}},[t._v("TransformationRulesPass")]),t._v(" &")],1),t._v(" "),a("td",[a("strong",[a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_transformation_rules_pass.html#function-operator="}},[t._v("operator=")])],1),t._v("("),a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_transformation_rules_pass.html"}},[t._v("TransformationRulesPass")]),t._v(" && ) =default"),a("br"),t._v("Move assignment is permitted.")],1)]),t._v(" "),a("tr",[a("td",[t._v("llvm::PreservedAnalyses")]),t._v(" "),a("td",[a("strong",[a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_transformation_rules_pass.html#function-run"}},[t._v("run")])],1),t._v("(llvm::Module & module, llvm::ModuleAnalysisManager & mam)")])]),t._v(" "),a("tr",[a("td",[t._v("bool")]),t._v(" "),a("td",[a("strong",[a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_transformation_rules_pass.html#function-runonfunction"}},[t._v("runOnFunction")])],1),t._v("(llvm::Function & function, InstructionModifier const & modifier)")])]),t._v(" "),a("tr",[a("td",[t._v("void")]),t._v(" "),a("td",[a("strong",[a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_transformation_rules_pass.html#function-processreplacements"}},[t._v("processReplacements")])],1),t._v("()"),a("br"),t._v("Applies each of the replacements in the "),a("code",[t._v("replacements_")]),t._v(" variable.")])]),t._v(" "),a("tr",[a("td",[t._v("void")]),t._v(" "),a("td",[a("strong",[a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_transformation_rules_pass.html#function-setupcopyandexpand"}},[t._v("setupCopyAndExpand")])],1),t._v("()"),a("br"),t._v("Configuration function for copy and expand to setup the necessary rules.")])]),t._v(" "),a("tr",[a("td",[t._v("void")]),t._v(" "),a("td",[a("strong",[a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_transformation_rules_pass.html#function-runcopyandexpand"}},[t._v("runCopyAndExpand")])],1),t._v("(llvm::Module & module, llvm::ModuleAnalysisManager & mam)")])]),t._v(" "),a("tr",[a("td",[t._v("llvm::Value *")]),t._v(" "),a("td",[a("strong",[a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_transformation_rules_pass.html#function-copyandexpand"}},[t._v("copyAndExpand")])],1),t._v("(llvm::Value * input, DeletableInstructions & schedule_instruction_deletion)")])]),t._v(" "),a("tr",[a("td",[t._v("llvm::Function *")]),t._v(" "),a("td",[a("strong",[a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_transformation_rules_pass.html#function-expandfunctioncall"}},[t._v("expandFunctionCall")])],1),t._v("(llvm::Function & callee, ConstantArguments const & const_args ={})"),a("br"),t._v("Copies the function body and replace function arguments whenever arguments are constant.")])]),t._v(" "),a("tr",[a("td",[t._v("void")]),t._v(" "),a("td",[a("strong",[a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_transformation_rules_pass.html#function-constantfoldfunction"}},[t._v("constantFoldFunction")])],1),t._v("(llvm::Function & callee)"),a("br"),t._v("Folds all constant expression in function.")])]),t._v(" "),a("tr",[a("td",[t._v("void")]),t._v(" "),a("td",[a("strong",[a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_transformation_rules_pass.html#function-addconstexprrule"}},[t._v("addConstExprRule")])],1),t._v("("),a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_replacement_rule.html"}},[t._v("ReplacementRule")]),t._v(" && rule)"),a("br"),t._v("Helper function to create replacements for constant expressions.")],1)]),t._v(" "),a("tr",[a("td",[t._v("void")]),t._v(" "),a("td",[a("strong",[a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_transformation_rules_pass.html#function-rundetectactivecode"}},[t._v("runDetectActiveCode")])],1),t._v("(llvm::Module & module, llvm::ModuleAnalysisManager & mam)")])]),t._v(" "),a("tr",[a("td",[t._v("void")]),t._v(" "),a("td",[a("strong",[a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_transformation_rules_pass.html#function-rundeletedeadcode"}},[t._v("runDeleteDeadCode")])],1),t._v("(llvm::Module & module, llvm::ModuleAnalysisManager & mam)")])]),t._v(" "),a("tr",[a("td",[t._v("llvm::Value *")]),t._v(" "),a("td",[a("strong",[a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_transformation_rules_pass.html#function-detectactivecode"}},[t._v("detectActiveCode")])],1),t._v("(llvm::Value * input, DeletableInstructions & )")])]),t._v(" "),a("tr",[a("td",[t._v("llvm::Value *")]),t._v(" "),a("td",[a("strong",[a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_transformation_rules_pass.html#function-deletedeadcode"}},[t._v("deleteDeadCode")])],1),t._v("(llvm::Value * input, DeletableInstructions & )")])]),t._v(" "),a("tr",[a("td",[t._v("bool")]),t._v(" "),a("td",[a("strong",[a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_transformation_rules_pass.html#function-isactive"}},[t._v("isActive")])],1),t._v("(llvm::Value * value) const")])]),t._v(" "),a("tr",[a("td",[t._v("void")]),t._v(" "),a("td",[a("strong",[a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_transformation_rules_pass.html#function-followusers"}},[t._v("followUsers")])],1),t._v("(llvm::Value * value)")])]),t._v(" "),a("tr",[a("td",[t._v("void")]),t._v(" "),a("td",[a("strong",[a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_transformation_rules_pass.html#function-runreplacephi"}},[t._v("runReplacePhi")])],1),t._v("(llvm::Module & module, llvm::ModuleAnalysisManager & mam)")])]),t._v(" "),a("tr",[a("td",[t._v("void")]),t._v(" "),a("td",[a("strong",[a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_transformation_rules_pass.html#function-runapplyrules"}},[t._v("runApplyRules")])],1),t._v("(llvm::Module & module, llvm::ModuleAnalysisManager & mam)")])]),t._v(" "),a("tr",[a("td",[t._v("bool")]),t._v(" "),a("td",[a("strong",[a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_transformation_rules_pass.html#function-onqubitrelease"}},[t._v("onQubitRelease")])],1),t._v("(llvm::Instruction * instruction, Captures & captures)")])]),t._v(" "),a("tr",[a("td",[t._v("bool")]),t._v(" "),a("td",[a("strong",[a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_transformation_rules_pass.html#function-onqubitallocate"}},[t._v("onQubitAllocate")])],1),t._v("(llvm::Instruction * instruction, Captures & captures)")])]),t._v(" "),a("tr",[a("td",[t._v("void")]),t._v(" "),a("td",[a("strong",[a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_transformation_rules_pass.html#function-setlogger"}},[t._v("setLogger")])],1),t._v("(ILoggerPtr logger)")])]),t._v(" "),a("tr",[a("td",[t._v("bool")]),t._v(" "),a("td",[a("strong",[a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_transformation_rules_pass.html#function-isrequired"}},[t._v("isRequired")])],1),t._v("()"),a("br"),t._v("Whether or not this pass is required to run.")])])])]),t._v(" "),a("h2",{attrs:{id:"detailed-description"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#detailed-description"}},[t._v("#")]),t._v(" Detailed Description")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("microsoft")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token base-clause"}},[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("quantum"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TransformationRulesPass")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("This class applies a set of transformation rules to the IR to transform it into a new IR. The rules are added using the "),a("RouterLink",{attrs:{to:"/qat/Classes/classmicrosoft_1_1quantum_1_1_rule_set.html"}},[t._v("RuleSet")]),t._v(" class which allows the developer to create one or more rules on how to transform the IR.")],1),t._v(" "),a("p",[t._v("The module executes the following steps: ┌─────────────────┐ │ Apply profile │ └─────────────────┘ │ ┌───────────────────────────────┐ ├───────────────▶│ Copy and expand functions │──┐ │ clone └───────────────────────────────┘ │ │ functions? │ delete dead │ │ ▼ code? │ │ ┌───────────────────────────────┐ │ ├───────────────▶│ Determine active code │ │ │ delete dead └───────────────────────────────┘ │ │ code? │ │ leave dead │ ▼ │ code? │ ┌───────────────────────────────┐ │ │ │ Simplify phi nodes │ │ │ └───────────────────────────────┘ │ │ │ │ │ ▼ │ │ ┌───────────────────────────────┐ │ │ │ Delete dead code │ │ │ └───────────────────────────────┘ │ │ │ │ │ ▼ │ │ fallback ┌───────────────────────────────┐ │ └───────────────▶│ Apply rules │◀─┘ └───────────────────────────────┘")]),t._v(" "),a("p",[t._v("Copying and expanding functions identifies function calls and identifies compile time constants passed to the function. It then copies the full implementation of the function, replacing all compile-time constants (and hence changing the function signature). That is, if a function call "),a("code",[t._v("f(x, 9)")]),t._v(" is identified, it is replaced with "),a("code",[t._v("f.1(x)")]),t._v(" where "),a("code",[t._v("f.1")]),t._v(" is a copy of "),a("code",[t._v("f")]),t._v(" with second argument written into the function.")]),t._v(" "),a("h2",{attrs:{id:"public-types-documentation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#public-types-documentation"}},[t._v("#")]),t._v(" Public Types Documentation")]),t._v(" "),a("h3",{attrs:{id:"using-replacements"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#using-replacements"}},[t._v("#")]),t._v(" using Replacements")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("using")]),t._v(" microsoft"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("quantum"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("TransformationRulesPass"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("Replacements "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("  ReplacementRule"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("Replacements"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"using-instruction"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#using-instruction"}},[t._v("#")]),t._v(" using Instruction")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("using")]),t._v(" microsoft"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("quantum"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("TransformationRulesPass"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("Instruction "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("  llvm"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("Instruction"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"using-rules"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#using-rules"}},[t._v("#")]),t._v(" using Rules")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("using")]),t._v(" microsoft"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("quantum"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("TransformationRulesPass"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("Rules "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("  std"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("vector"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ReplacementRule"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"using-value"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#using-value"}},[t._v("#")]),t._v(" using Value")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("using")]),t._v(" microsoft"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("quantum"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("TransformationRulesPass"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("Value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("  llvm"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("Value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"using-builder"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#using-builder"}},[t._v("#")]),t._v(" using Builder")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("using")]),t._v(" microsoft"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("quantum"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("TransformationRulesPass"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("Builder "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("  ReplacementRule"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("Builder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"using-allocationmanagerptr"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#using-allocationmanagerptr"}},[t._v("#")]),t._v(" using AllocationManagerPtr")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("using")]),t._v(" microsoft"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("quantum"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("TransformationRulesPass"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("AllocationManagerPtr "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("  IAllocationManager"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("AllocationManagerPtr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"using-captures"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#using-captures"}},[t._v("#")]),t._v(" using Captures")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("using")]),t._v(" microsoft"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("quantum"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("TransformationRulesPass"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("Captures "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("  RuleSet"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("Captures"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"using-constantarguments"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#using-constantarguments"}},[t._v("#")]),t._v(" using ConstantArguments")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("using")]),t._v(" microsoft"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("quantum"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("TransformationRulesPass"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("ConstantArguments "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("  std"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("unordered_map"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("std"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("string"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" llvm"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("ConstantInt"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"using-iloggerptr"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#using-iloggerptr"}},[t._v("#")]),t._v(" using ILoggerPtr")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("using")]),t._v(" microsoft"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("quantum"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("TransformationRulesPass"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("ILoggerPtr "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("  std"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("shared_ptr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ILogger"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"using-deletableinstructions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#using-deletableinstructions"}},[t._v("#")]),t._v(" using DeletableInstructions")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("using")]),t._v(" microsoft"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("quantum"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("TransformationRulesPass"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("DeletableInstructions "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("  std"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("vector"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("llvm"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("Instruction"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"using-instructionmodifier"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#using-instructionmodifier"}},[t._v("#")]),t._v(" using InstructionModifier")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("using")]),t._v(" microsoft"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("quantum"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("TransformationRulesPass"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("InstructionModifier "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("  std"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("function"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("llvm"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("Value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("llvm"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("Value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" DeletableInstructions"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"public-functions-documentation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#public-functions-documentation"}},[t._v("#")]),t._v(" Public Functions Documentation")]),t._v(" "),a("h3",{attrs:{id:"function-transformationrulespass"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#function-transformationrulespass"}},[t._v("#")]),t._v(" function TransformationRulesPass")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("TransformationRulesPass")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    RuleSet "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" rule_set"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    TransformationRulesPassConfiguration "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    Profile "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" profile\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("Custom default constructor.")]),t._v(" "),a("h3",{attrs:{id:"function-transformationrulespass-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#function-transformationrulespass-2"}},[t._v("#")]),t._v(" function TransformationRulesPass")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("TransformationRulesPass")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    TransformationRulesPass "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("Copy construction is banned.")]),t._v(" "),a("h3",{attrs:{id:"function-transformationrulespass-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#function-transformationrulespass-3"}},[t._v("#")]),t._v(" function TransformationRulesPass")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("TransformationRulesPass")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    TransformationRulesPass "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v("\n")])])]),a("p",[t._v("We allow move semantics.")]),t._v(" "),a("h3",{attrs:{id:"function-transformationrulespass-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#function-transformationrulespass-4"}},[t._v("#")]),t._v(" function ~TransformationRulesPass")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("TransformationRulesPass")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v("\n")])])]),a("p",[t._v("Default destruction.")]),t._v(" "),a("h3",{attrs:{id:"function-operator"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#function-operator"}},[t._v("#")]),t._v(" function operator=")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[t._v("TransformationRulesPass "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("operator")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    TransformationRulesPass "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("Copy assignment is banned.")]),t._v(" "),a("h3",{attrs:{id:"function-operator-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#function-operator-2"}},[t._v("#")]),t._v(" function operator=")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[t._v("TransformationRulesPass "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("operator")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    TransformationRulesPass "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v("\n")])])]),a("p",[t._v("Move assignment is permitted.")]),t._v(" "),a("h3",{attrs:{id:"function-run"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#function-run"}},[t._v("#")]),t._v(" function run")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[t._v("llvm"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("PreservedAnalyses "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    llvm"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("Module "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("module")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    llvm"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("ModuleAnalysisManager "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" mam\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("Implements the transformation analysis which uses the supplied ruleset to make substitutions in each function.")]),t._v(" "),a("h3",{attrs:{id:"function-runonfunction"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#function-runonfunction"}},[t._v("#")]),t._v(" function runOnFunction")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("bool")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("runOnFunction")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    llvm"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("Function "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" function"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    InstructionModifier "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" modifier\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("Generic function to apply a instructionModifier (lambda function) to every instruction in the function "),a("code",[t._v("function")]),t._v(". This method follows the execution path to the extend possible and deals with branching if the branch statement can be evaluated at compile time.")]),t._v(" "),a("h3",{attrs:{id:"function-processreplacements"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#function-processreplacements"}},[t._v("#")]),t._v(" function processReplacements")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("processReplacements")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("Applies each of the replacements in the "),a("code",[t._v("replacements_")]),t._v(" variable.")]),t._v(" "),a("h3",{attrs:{id:"function-setupcopyandexpand"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#function-setupcopyandexpand"}},[t._v("#")]),t._v(" function setupCopyAndExpand")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setupCopyAndExpand")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("Configuration function for copy and expand to setup the necessary rules.")]),t._v(" "),a("h3",{attrs:{id:"function-runcopyandexpand"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#function-runcopyandexpand"}},[t._v("#")]),t._v(" function runCopyAndExpand")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("runCopyAndExpand")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    llvm"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("Module "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("module")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    llvm"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("ModuleAnalysisManager "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" mam\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("Main function for running the copy and expand functionality. This function first identifies the entry point and then follows every execution path to copy the callee function for every call instruction encountered. This makes that every call in the code has its own unique callee function which ensures that when allocating qubits or results, the assigned registers are not accidentally reused.")]),t._v(" "),a("h3",{attrs:{id:"function-copyandexpand"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#function-copyandexpand"}},[t._v("#")]),t._v(" function copyAndExpand")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[t._v("llvm"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("Value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("copyAndExpand")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    llvm"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("Value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" input"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    DeletableInstructions "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" schedule_instruction_deletion\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("Test whether the instruction is a call instruction and copy the callee in case it is. This function collects instructions which are scheduled for deletion at a later point.")]),t._v(" "),a("h3",{attrs:{id:"function-expandfunctioncall"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#function-expandfunctioncall"}},[t._v("#")]),t._v(" function expandFunctionCall")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[t._v("llvm"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("Function "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("expandFunctionCall")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    llvm"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("Function "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" callee"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    ConstantArguments "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" const_args "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("Copies the function body and replace function arguments whenever arguments are constant.")]),t._v(" "),a("h3",{attrs:{id:"function-constantfoldfunction"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#function-constantfoldfunction"}},[t._v("#")]),t._v(" function constantFoldFunction")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("constantFoldFunction")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    llvm"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("Function "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" callee\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("Folds all constant expression in function.")]),t._v(" "),a("h3",{attrs:{id:"function-addconstexprrule"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#function-addconstexprrule"}},[t._v("#")]),t._v(" function addConstExprRule")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addConstExprRule")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    ReplacementRule "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" rule\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("Helper function to create replacements for constant expressions.")]),t._v(" "),a("h3",{attrs:{id:"function-rundetectactivecode"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#function-rundetectactivecode"}},[t._v("#")]),t._v(" function runDetectActiveCode")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("runDetectActiveCode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    llvm"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("Module "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("module")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    llvm"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("ModuleAnalysisManager "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" mam\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h3",{attrs:{id:"function-rundeletedeadcode"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#function-rundeletedeadcode"}},[t._v("#")]),t._v(" function runDeleteDeadCode")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("runDeleteDeadCode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    llvm"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("Module "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("module")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    llvm"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("ModuleAnalysisManager "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" mam\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h3",{attrs:{id:"function-detectactivecode"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#function-detectactivecode"}},[t._v("#")]),t._v(" function detectActiveCode")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[t._v("llvm"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("Value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("detectActiveCode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    llvm"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("Value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" input"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    DeletableInstructions "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h3",{attrs:{id:"function-deletedeadcode"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#function-deletedeadcode"}},[t._v("#")]),t._v(" function deleteDeadCode")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[t._v("llvm"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("Value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("deleteDeadCode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    llvm"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("Value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" input"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    DeletableInstructions "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h3",{attrs:{id:"function-isactive"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#function-isactive"}},[t._v("#")]),t._v(" function isActive")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("bool")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("isActive")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    llvm"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("Value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" value\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v("\n")])])]),a("h3",{attrs:{id:"function-followusers"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#function-followusers"}},[t._v("#")]),t._v(" function followUsers")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("followUsers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    llvm"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("Value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" value\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h3",{attrs:{id:"function-runreplacephi"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#function-runreplacephi"}},[t._v("#")]),t._v(" function runReplacePhi")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("runReplacePhi")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    llvm"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("Module "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("module")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    llvm"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("ModuleAnalysisManager "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" mam\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("Function which replaces phi nodes which refer to inactive blocks. That is, in cases where branch statement evaluates at compile time, only one block will be marked as active. For those case we can eliminate the phi nodes. In the case where branch statements cannot be evaluated all are marked as active. In this case, phi nodes are left unchanged.")]),t._v(" "),a("h3",{attrs:{id:"function-runapplyrules"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#function-runapplyrules"}},[t._v("#")]),t._v(" function runApplyRules")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("runApplyRules")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    llvm"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("Module "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("module")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    llvm"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("ModuleAnalysisManager "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" mam\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h3",{attrs:{id:"function-onqubitrelease"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#function-onqubitrelease"}},[t._v("#")]),t._v(" function onQubitRelease")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("bool")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("onQubitRelease")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    llvm"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("Instruction "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" instruction"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    Captures "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" captures\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h3",{attrs:{id:"function-onqubitallocate"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#function-onqubitallocate"}},[t._v("#")]),t._v(" function onQubitAllocate")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("bool")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("onQubitAllocate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    llvm"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),t._v("Instruction "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" instruction"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    Captures "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" captures\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h3",{attrs:{id:"function-setlogger"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#function-setlogger"}},[t._v("#")]),t._v(" function setLogger")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setLogger")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    ILoggerPtr logger\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h3",{attrs:{id:"function-isrequired"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#function-isrequired"}},[t._v("#")]),t._v(" function isRequired")]),t._v(" "),a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("bool")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("isRequired")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("Whether or not this pass is required to run.")]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("Updated on 16 November 2021 at 11:19:15 UTC")])])}),[],!1,null,null,null);s.default=e.exports}}]);