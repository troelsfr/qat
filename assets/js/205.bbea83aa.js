(window.webpackJsonp=window.webpackJsonp||[]).push([[205],{588:function(e,t,a){"use strict";a.r(t);var s=a(54),n=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"build-guide"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#build-guide"}},[e._v("#")]),e._v(" Build guide")]),e._v(" "),a("p",[e._v("This document will guide you through all the requirements and steps that you need to follow to build the QIR adaptor tool (QAT). The first section of this guide helps you install the tools needed to build QAT. After you have finished with the second section of the guide, you should have the "),a("code",[e._v("qat")]),e._v(" executable compiled and ready to run. As a part of the third part of this post, we will show you how to build and serve all of the documentation including the user guides, developer guides and API documentation. We will go through the steps of compiling the whole library as well as how to run all the tests suite that has been provided as the fourth part of this document. This part is only relevant if you intend to extend or modify the core codebase. There is no need for it when simply building an extension to QAT without having the need to change anything else in the core library. There is a lot more information about how to create a custom extension within the developersâ€™ section.")]),e._v(" "),a("h2",{attrs:{id:"prerequisites"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#prerequisites"}},[e._v("#")]),e._v(" Prerequisites")]),e._v(" "),a("p",[e._v("It is necessary for you to have the following tools before you get started on making a new build from this project:")]),e._v(" "),a("ul",[a("li",[e._v("C++ compiler")]),e._v(" "),a("li",[e._v("CMake")])]),e._v(" "),a("p",[e._v("If you are compiling and using the command-line tool, these are necessary tools regardless of whether you plan to develop the library itself. The build configuration is handled by CMake, which informs you if a compiler needs to be installed.")]),e._v(" "),a("h3",{attrs:{id:"on-mac-os-x"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#on-mac-os-x"}},[e._v("#")]),e._v(" On Mac OS X")]),e._v(" "),a("p",[e._v("Those using Mac OS X can install CMake through the use of a command-line tool called "),a("code",[e._v("brew")]),e._v(", as follows:")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("brew "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" cmake\n")])])]),a("p",[e._v("It should not even be necessary to install anything else on top of macOS, since the compiler comes preinstalled. There is no need to read the next subsection ("),a("a",{attrs:{href:"#developer-prerequisites"}},[e._v("Developer prerequisites")]),e._v(") if you are not intending to modify the core library and can safely jump to the section "),a("a",{attrs:{href:"#library-dependencies"}},[e._v("Library Dependencies")])]),e._v(" "),a("h3",{attrs:{id:"on-ubuntu-20-04"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#on-ubuntu-20-04"}},[e._v("#")]),e._v(" On Ubuntu 20.04")]),e._v(" "),a("p",[e._v("Additionally to CMake, you will also require Clang in order to build Ubuntu 20.04. You can accomplish this by following the steps below:")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("apt")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" clang-11 cmake\n")])])]),a("p",[e._v("You can skip straight to "),a("a",{attrs:{href:"#library-dependencies"}},[e._v("Library Dependencies")]),e._v(" if you do not intend to work on developing the core library.")]),e._v(" "),a("h2",{attrs:{id:"developer-prerequisites"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#developer-prerequisites"}},[e._v("#")]),e._v(" Developer prerequisites")]),e._v(" "),a("p",[e._v("Development of the core library requires additional tools. These are used formatting, linting and managing code quality. For this purpose, the following tools and packages are used:")]),e._v(" "),a("ul",[a("li",[e._v("Python 3")]),e._v(" "),a("li",[e._v("Python packages specified in "),a("code",[e._v("requirements.txt")])]),e._v(" "),a("li",[e._v("clang-format")]),e._v(" "),a("li",[e._v("clang-tidy")])]),e._v(" "),a("p",[e._v("The installation process varies depending on the platform you use. The following subsections provide details on how to install these tools on each platform.")]),e._v(" "),a("h3",{attrs:{id:"on-mac-os-x-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#on-mac-os-x-2"}},[e._v("#")]),e._v(" On Mac OS X")]),e._v(" "),a("p",[e._v("TODO:")]),e._v(" "),a("h3",{attrs:{id:"on-ubuntu-20-04-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#on-ubuntu-20-04-2"}},[e._v("#")]),e._v(" On Ubuntu 20.04")]),e._v(" "),a("p",[e._v("Installing the clang tools on Ubuntu along with Python can be accomplished by running these commands:")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("apt")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" clang-format-11 clang-tidy-11\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("apt")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" python3 python3-pip\n")])])]),a("p",[e._v("We recommend that you use version 11 of clang in order to be consistent with the version of LLVM on which the library depends. In general, the code should work with any version of clang. Make sure that the compiler environment variables are defined correctly in order to select the correct version:")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("export")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("CC")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("clang-11\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("export")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("CXX")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("clang++-11\n")])])]),a("h3",{attrs:{id:"common-to-all-platforms"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#common-to-all-platforms"}},[e._v("#")]),e._v(" Common to all platforms")]),e._v(" "),a("p",[e._v("Last but not least, we install the Python libraries that are required:")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("      pip "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" -r requirements.txt\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("chmod")]),e._v(" +x manage\n")])])]),a("p",[e._v("As a result, the "),a("code",[e._v("manage")]),e._v(" tool will be available for you to help you make sure your code is high quality. Getting a contribution merged into the code base requires the manage tools CI flow to be successful. Thus, if you plan to contribute you will most likely need to complete this step.")]),e._v(" "),a("h2",{attrs:{id:"library-dependencies"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#library-dependencies"}},[e._v("#")]),e._v(" Library Dependencies")]),e._v(" "),a("p",[e._v("The QAT library itself is written in C++ and depends on LLVM for compilation and Google Test for testing purposes. Google test is checked out as a submodule whereas LLVM needs to be installed on the system. To get check out all submodules run")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" submodule update --init --recursive\n")])])]),a("h3",{attrs:{id:"installing-llvm-on-mac-os-x"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#installing-llvm-on-mac-os-x"}},[e._v("#")]),e._v(" Installing LLVM on Mac OS X")]),e._v(" "),a("p",[e._v("TODO:")]),e._v(" "),a("h3",{attrs:{id:"installing-llvm-on-ubuntu-20-04"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#installing-llvm-on-ubuntu-20-04"}},[e._v("#")]),e._v(" Installing LLVM on Ubuntu 20.04")]),e._v(" "),a("p",[e._v("For the installation of LLVM from Ubuntu we use the package manager "),a("code",[e._v("apt")]),e._v(". For full run installation, run the following command:")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("apt")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v("  llvm-11 lldb-11 llvm-11-dev libllvm11 llvm-11-runtime\n")])])]),a("p",[e._v("By doing this, we will ensure that CMake can find LLVM and that all headers and libraries used by the QAT library are available.")]),e._v(" "),a("h1",{attrs:{id:"build-instructions-for-users"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#build-instructions-for-users"}},[e._v("#")]),e._v(" Build instructions for users")]),e._v(" "),a("p",[e._v("From the root folder in the repository, go to "),a("code",[e._v("src/Passes")]),e._v(", then create a build folder "),a("code",[e._v("Debug")]),e._v(" and use CMake to build the executable:")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" Debug\ncmake "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("..")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("make")]),e._v(" qat\n")])])]),a("p",[e._v("then")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("./Source/Apps/qat\n")])])]),a("h1",{attrs:{id:"building-the-documentation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#building-the-documentation"}},[e._v("#")]),e._v(" Building the documentation")]),e._v(" "),a("p",[e._v("To build the documentation Docker image, run:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("make documentation\n")])])]),a("p",[e._v("To serve the documentation locally, run:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("make serve-docs\n")])])]),a("h1",{attrs:{id:"building-for-developers"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#building-for-developers"}},[e._v("#")]),e._v(" Building for developers")]),e._v(" "),a("p",[e._v("To build the tool, create a new build directory and switch to that directory:")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("mkdir")]),e._v(" Debug\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" Debug/\n")])])]),a("p",[e._v("To build the library, first configure CMake from the build directory")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("cmake "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("..")]),e._v("\n")])])]),a("p",[e._v("and then make your target")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("make")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n")])])]),a("p",[e._v("The default target is "),a("code",[e._v("all")]),e._v(". Other valid targets are the name of the folders in "),a("code",[e._v("libs/")]),e._v(" found in the passes root.")])])}),[],!1,null,null,null);t.default=n.exports}}]);